<!DOCTYPE html>
<html lang="en">
<head>


<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
	<h2 align="center">Create new Student's Ajax Account</h2>
	<p align="center" background-color="#ABBAEA;">
		<b>Please enters the following details :</b>
	</p>
	<form action="/college-mgmt/HomeServlet" method="post" align="center">


		<lable for="fname"> <b>First Name :</b></lable>

		<input type="text" onkeypress="return allowedKey(event)"
			placeholder="First Name" name="fname" id="fname01" required><br>
		<br>
		<lable for="midname"> <b>Middle Name :</b></lable>

		<input type="text" onkeypress="return allowedKey(event)"
			placeholder="Middle Name" name="mid" id="mid01" required > <br>
		<br>

		<lable for="lname"> <b>Last Name :</b></lable>
		<input type="text" onkeypress="return allowedKey(event)"
			placeholder="Last Name" name="lname" id="lname02" required ><br>
		<br>


		<lable for="dob"> <b>Date of Birth :</b></lable>
		<input type="date" placeholder="DOB" name="dob" id="dobstd" required><br>
		<br>

		<lable for="coid"> <b>Course</b></lable>
		<select name="course" id="course1">
			<option value="none">--NONE--</option>

			<option value="b.tech(cs)">B.tech(CS)</option>
			<option value="b.tech(me)">B.tech(ME)</option>
			<option value="b.tech(ce)">B.tech(CE)</option>
			<option value="b.tech(ec)">B.tech(EC)</option>
			<option value="b.tech(eee)">B.tech(EEE)</option>

			<option value="bba">BBA</option>
			<option value="mba">MBA</option>
			<option value="bca">BCA</option>
			<option value="mca">MCA</option>



		</select> <br>
		<br>

		<lable for="mobile"> <b>Mobile Number :</b></lable>
		<input type="text" placeholder="Mobile" name="mobile" id="mob01"
			pattern="[1-9]{1}[0-9]{9}" title="Please enter exactly 10 digits"
			required><br>
		<br>
		<lable for="add"> <b>Address :</b></lable>
		<input type="text" placeholder="Address" name="add" id="add01"
			required><br>
		<br> <label for="email"><b>Email Id :</b></label> <input
			type="email" placeholder="Email" name="email" id="email" required
			><br> <br>
			 <label for="pwrd"><b>Password
				:</b></label> <input type="password" placeholder="Enter password" name="pword"
			id="pwd01" required><br>
		<br> <label for="pwrd"><b>Confirm Password :</b></label> <input
			type="password" placeholder="Enter password" name="confirmPwd"
			id="pwd02" required> <br>
		<br>
		<p>
			<b>Click on 'Ajax Button' for verifying account<b>
		</p>

<button type="button" name="ajax" id="ajax" onclick="createUser()">Create User</button>
		<p>
			
	</form>
	<script>
function createUser() {
	var first_name=document.getElementById("fname01").value
	var middle_name=document.getElementById("mid01").value
	var last_name=document.getElementById("lname02").value
	var dob=document.getElementById("dobstd").value
	var e=document.getElementById("course1")
	var course = e.options[e.selectedIndex].value;
	var mobile=document.getElementById("mob01").value
	var add=document.getElementById("add01").value
	var email = document.getElementById("email").value 
	var pass = document.getElementById("pwd01").value 
	var confpass = document.getElementById("pwd02").value 

		
	

alert("first_name : "+ first_name + " middle_name : "+ middle_name+ " last_name : "+
		last_name+" dob : "+ dob+" course : "+ course+" mobile : "+ mobile+" add : "+ add+" email : "+ email);
	
	// To set HTML field value

 	  var xhttp = new XMLHttpRequest();
	  xhttp.onreadystatechange = function() {
	    if (this.readyState == 4 && this.status == 200) {
	    	
	    	if(this.responseText=="disallowed"){
	    		alert('This email already taken')
	    		
                document.getElementById("email").value=''


	    	}
	     
	     alert(this.responseText)

	    }
	  };
	  xhttp.open("GET", "http://localhost:8081/college-mgmt/HomeServlet?fname="+
			  first_name+"&"+"mid="+middle_name+"&"+"lname="+last_name+"&"+
			  "dob="+dob+"&"+"course="+course+"&"+"mobile="+mobile+"add="+add+"&"+"email="+email+"&"+"pword="+pass+"&"+"confirmPwd="+confpass, true);
	  xhttp.send();
	}

function allowedKey(e){
    var k;
   
       k = e.keyCode;
       if(k>=65 && k<=90 || k>=97 && k<=122){
    	   
       }
       
     else
    {
       alert('only alphabatic value allowed')
 }

} 
function passwordNotmatched(){
	if(document.getElementById("pwd01").value ==
		document.getElementById("pwd02").value){
		alert('password matched')
		return true; 
} 
else {
	
	alert('password not matched');
	return false;

}}

</script>

</body>
</html>